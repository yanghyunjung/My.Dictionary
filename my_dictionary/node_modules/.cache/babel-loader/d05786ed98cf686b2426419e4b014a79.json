{"ast":null,"code":"import { firestore } from \"../../firebase\";\nconst dict_db = firestore.collection(\"dict\"); //Actions\n\nconst LOAD = 'dict/LOAD';\nconst CREATE = 'dict/CREATE';\nconst initialState = {\n  list: [{\n    id: 1,\n    text: 'ㅎ1ㅎ1',\n    explain: \"히히를 변형한 단어. 숫자 1을 'ㅣ'로 쓴다.\",\n    example: '저 친구가 초콜릿을 줬어. ㅎ1ㅎ1.'\n  }],\n  is_loaded: false\n}; // Action Creators\n\nexport const loadDict = dict => {\n  return {\n    type: LOAD,\n    dict\n  };\n};\nexport const createDict = dict => {\n  return {\n    type: CREATE,\n    dict\n  };\n};\nexport const loadDictFB = () => {\n  return function (dispatch) {\n    dict_db.get().then(docs => {\n      let dict_data = [];\n      docs.forEach(doc => {\n        if (doc.exists) {\n          dict_data = [...dict_data, {\n            id: doc.id,\n            ...doc.data()\n          }];\n        }\n      });\n      dispatch(loadDict(dict_data));\n    });\n  };\n};\nexport const addDictFB = dict => {\n  return function (dispatch) {\n    let dict_item = {\n      text: dict\n    };\n    dict_db.add(dict_item).then(docRef => {\n      dict_item = { ...dict_item,\n        id: docRef.id\n      };\n      dispatch(createDict(dict_item));\n    });\n  };\n}; // export const updateDictFB = (dict) => {\n// \treturn function(dispatch, getState){\n// \t\tconst _dict_data = getState().dict.list[dict];\n// \t\tlet dict_data = {..._dict_data};\n// \t\tdict_db.doc(dict_data.id).update(dict_data).then(docRef => {\n// \t\t\tdispatch(updateDictFB(dict));\n// \t\t});\n// \t}\n// }\n//Reducer\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case 'dict/LOAD':\n      {\n        if (action.dict.length > 0) {\n          // [{ id: 1, text: 'ㅎ1ㅎ1', explain: \"히히를 변형한 단어. 숫자 1을 'ㅣ'로 쓴다.\", example: '저 친구가 초콜릿을 줬어. ㅎ1ㅎ1.'}]\n          // {id: '1232', text: {text: 123, example:123, explain: 123}}\n          return { ...state,\n            list: action.dict\n          };\n        }\n\n        return state;\n      }\n\n    case 'dict/CREATE':\n      {\n        const new_dict_list = [...state.list, action.dict];\n        console.log(new_dict_list);\n        return { ...state,\n          list: new_dict_list\n        };\n      }\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/hyunjung/Project_01/my_dictionary/my_dictionary/src/redux/modules/dict.js"],"names":["firestore","dict_db","collection","LOAD","CREATE","initialState","list","id","text","explain","example","is_loaded","loadDict","dict","type","createDict","loadDictFB","dispatch","get","then","docs","dict_data","forEach","doc","exists","data","addDictFB","dict_item","add","docRef","reducer","state","action","length","new_dict_list","console","log"],"mappings":"AAAA,SAAQA,SAAR,QAAwB,gBAAxB;AAEA,MAAMC,OAAO,GAAGD,SAAS,CAACE,UAAV,CAAqB,MAArB,CAAhB,C,CAEA;;AACA,MAAMC,IAAI,GAAG,WAAb;AACA,MAAMC,MAAM,GAAG,aAAf;AAEA,MAAMC,YAAY,GAAG;AACpBC,EAAAA,IAAI,EAAE,CAAC;AAAEC,IAAAA,EAAE,EAAE,CAAN;AAASC,IAAAA,IAAI,EAAE,MAAf;AAAuBC,IAAAA,OAAO,EAAE,4BAAhC;AAA8DC,IAAAA,OAAO,EAAE;AAAvE,GAAD,CADc;AAEpBC,EAAAA,SAAS,EAAE;AAFS,CAArB,C,CAKA;;AACA,OAAO,MAAMC,QAAQ,GAAIC,IAAD,IAAU;AACjC,SAAO;AAAEC,IAAAA,IAAI,EAAEX,IAAR;AAAcU,IAAAA;AAAd,GAAP;AACA,CAFM;AAIP,OAAO,MAAME,UAAU,GAAIF,IAAD,IAAU;AACnC,SAAO;AAAEC,IAAAA,IAAI,EAAEV,MAAR;AAAgBS,IAAAA;AAAhB,GAAP;AACA,CAFM;AAIP,OAAO,MAAMG,UAAU,GAAG,MAAM;AAC/B,SAAO,UAAUC,QAAV,EAAmB;AACzBhB,IAAAA,OAAO,CAACiB,GAAR,GAAcC,IAAd,CAAoBC,IAAD,IAAU;AAC5B,UAAIC,SAAS,GAAG,EAAhB;AAEAD,MAAAA,IAAI,CAACE,OAAL,CAAcC,GAAD,IAAS;AACrB,YAAGA,GAAG,CAACC,MAAP,EAAc;AACdH,UAAAA,SAAS,GAAG,CAAC,GAAGA,SAAJ,EAAe;AAACd,YAAAA,EAAE,EAAEgB,GAAG,CAAChB,EAAT;AAAa,eAAGgB,GAAG,CAACE,IAAJ;AAAhB,WAAf,CAAZ;AACC;AACD,OAJD;AAKAR,MAAAA,QAAQ,CAACL,QAAQ,CAACS,SAAD,CAAT,CAAR;AACA,KATD;AAUA,GAXD;AAYA,CAbM;AAeP,OAAO,MAAMK,SAAS,GAAIb,IAAD,IAAU;AAClC,SAAO,UAAUI,QAAV,EAAmB;AACzB,QAAIU,SAAS,GAAG;AAACnB,MAAAA,IAAI,EAAEK;AAAP,KAAhB;AAEAZ,IAAAA,OAAO,CAAC2B,GAAR,CAAYD,SAAZ,EAAuBR,IAAvB,CAA4BU,MAAM,IAAI;AACrCF,MAAAA,SAAS,GAAG,EAAC,GAAGA,SAAJ;AAAepB,QAAAA,EAAE,EAAEsB,MAAM,CAACtB;AAA1B,OAAZ;AACAU,MAAAA,QAAQ,CAACF,UAAU,CAACY,SAAD,CAAX,CAAR;AACA,KAHD;AAIA,GAPD;AAQA,CATM,C,CAWP;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;;AACA,eAAe,SAASG,OAAT,CAAiBC,KAAK,GAAG1B,YAAzB,EAAuC2B,MAAM,GAAG,EAAhD,EAAoD;AAClE,UAAQA,MAAM,CAAClB,IAAf;AACC,SAAK,WAAL;AAAkB;AACjB,YAAGkB,MAAM,CAACnB,IAAP,CAAYoB,MAAZ,GAAqB,CAAxB,EAA0B;AACzB;AACA;AACA,iBAAO,EAAC,GAAGF,KAAJ;AAAWzB,YAAAA,IAAI,EAAE0B,MAAM,CAACnB;AAAxB,WAAP;AACA;;AAEA,eAAOkB,KAAP;AACD;;AAED,SAAK,aAAL;AAAoB;AACnB,cAAMG,aAAa,GAAG,CAAC,GAAGH,KAAK,CAACzB,IAAV,EAAgB0B,MAAM,CAACnB,IAAvB,CAAtB;AACAsB,QAAAA,OAAO,CAACC,GAAR,CAAYF,aAAZ;AACA,eAAO,EACN,GAAGH,KADG;AAENzB,UAAAA,IAAI,EAAE4B;AAFA,SAAP;AAIA;;AACD;AACC,aAAOH,KAAP;AApBF;AAsBA","sourcesContent":["import {firestore} from \"../../firebase\";\n\nconst dict_db = firestore.collection(\"dict\");\n\n//Actions\nconst LOAD = 'dict/LOAD';\nconst CREATE = 'dict/CREATE';\n\nconst initialState = {\n\tlist: [{ id: 1, text: 'ㅎ1ㅎ1', explain: \"히히를 변형한 단어. 숫자 1을 'ㅣ'로 쓴다.\", example: '저 친구가 초콜릿을 줬어. ㅎ1ㅎ1.'}],\n\tis_loaded: false,\n};\n\n// Action Creators\nexport const loadDict = (dict) => {\n\treturn { type: LOAD, dict };\n};\n\nexport const createDict = (dict) => {\n\treturn { type: CREATE, dict };\n};\n\nexport const loadDictFB = () => {\n\treturn function (dispatch){\n\t\tdict_db.get().then((docs) => {\n\t\t\tlet dict_data = [];\n\t\t\t\n\t\t\tdocs.forEach((doc) => {\n\t\t\t\tif(doc.exists){\n\t\t\t\tdict_data = [...dict_data, {id: doc.id, ...doc.data()}];\n\t\t\t\t}\n\t\t\t});\n\t\t\tdispatch(loadDict(dict_data));\n\t\t});\n\t};\n};\n\nexport const addDictFB = (dict) => {\n\treturn function (dispatch){\n\t\tlet dict_item = {text: dict};\n\n\t\tdict_db.add(dict_item).then(docRef => {\n\t\t\tdict_item = {...dict_item, id: docRef.id};\n\t\t\tdispatch(createDict(dict_item));\n\t\t})\n\t}\n}\n\n// export const updateDictFB = (dict) => {\n// \treturn function(dispatch, getState){\n// \t\tconst _dict_data = getState().dict.list[dict];\n\t\t\n// \t\tlet dict_data = {..._dict_data};\n\n// \t\tdict_db.doc(dict_data.id).update(dict_data).then(docRef => {\n// \t\t\tdispatch(updateDictFB(dict));\n// \t\t});\n// \t}\n// }\n\n//Reducer\nexport default function reducer(state = initialState, action = {}) {\n\tswitch (action.type) {\n\t\tcase 'dict/LOAD': {\n\t\t\tif(action.dict.length > 0){\n\t\t\t\t// [{ id: 1, text: 'ㅎ1ㅎ1', explain: \"히히를 변형한 단어. 숫자 1을 'ㅣ'로 쓴다.\", example: '저 친구가 초콜릿을 줬어. ㅎ1ㅎ1.'}]\n\t\t\t\t// {id: '1232', text: {text: 123, example:123, explain: 123}}\n\t\t\t\treturn {...state, list: action.dict};\n\t\t\t}\n\n\t\t\t\treturn state;\n\t\t}\n\n\t\tcase 'dict/CREATE': {\n\t\t\tconst new_dict_list = [...state.list, action.dict,];\n\t\t\tconsole.log(new_dict_list);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlist: new_dict_list,\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}"]},"metadata":{},"sourceType":"module"}