{"ast":null,"code":"import _objectSpread from\"/Users/hyunjung/Project_01/my_dictionary/my_dictionary/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/hyunjung/Project_01/my_dictionary/my_dictionary/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{firestore}from\"../../firebase\";var dict_db=firestore.collection(\"dict\");//Actions\nvar LOAD='dict/LOAD';var CREATE='dict/CREATE';var initialState={list:[{id:1,text:'ㅎ1ㅎ1',explain:\"히히를 변형한 단어. 숫자 1을 'ㅣ'로 쓴다.\",example:'저 친구가 초콜릿을 줬어. ㅎ1ㅎ1.'}],is_loaded:false};// Action Creators\nexport var loadDict=function loadDict(dict){return{type:LOAD,dict:dict};};export var createDict=function createDict(dict){return{type:CREATE,dict:dict};};export var loadDictFB=function loadDictFB(){return function(dispatch){dict_db.get().then(function(docs){var dict_data=[];docs.forEach(function(doc){if(doc.exists){dict_data=[].concat(_toConsumableArray(dict_data),[_objectSpread({id:doc.id},doc.data())]);}});dispatch(loadDict(dict_data));});};};export var addDictFB=function addDictFB(dict){return function(dispatch){var dict_item={text:dict.text,example:dict.example,explain:dict.explain};dict_db.add(dict_item).then(function(docRef){dict_item=_objectSpread(_objectSpread({},dict_item),{},{id:docRef.id});dispatch(createDict(dict_item));});};};// export const updateDictFB = (dict) => {\n// \treturn function(dispatch, getState){\n// \t\tconst _dict_data = getState().dict.list[dict];\n// \t\tlet dict_data = {..._dict_data};\n// \t\tdict_db.doc(dict_data.id).update(dict_data).then(docRef => {\n// \t\t\tdispatch(updateDictFB(dict));\n// \t\t});\n// \t}\n// }\n//Reducer\nexport default function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};switch(action.type){case'dict/LOAD':{if(action.dict.length>0){// [{ id: 1, text: 'ㅎ1ㅎ1', explain: \"히히를 변형한 단어. 숫자 1을 'ㅣ'로 쓴다.\", example: '저 친구가 초콜릿을 줬어. ㅎ1ㅎ1.'}]\n// {id: '1232', text: {text: 123, example:123, explain: 123}}\nreturn _objectSpread(_objectSpread({},state),{},{list:action.dict});}return state;}case'dict/CREATE':{var new_dict_list=[].concat(_toConsumableArray(state.list),[action.dict]);console.log(new_dict_list);return _objectSpread(_objectSpread({},state),{},{list:new_dict_list});}default:return state;}}","map":{"version":3,"sources":["/Users/hyunjung/Project_01/my_dictionary/my_dictionary/src/redux/modules/dict.js"],"names":["firestore","dict_db","collection","LOAD","CREATE","initialState","list","id","text","explain","example","is_loaded","loadDict","dict","type","createDict","loadDictFB","dispatch","get","then","docs","dict_data","forEach","doc","exists","data","addDictFB","dict_item","add","docRef","reducer","state","action","length","new_dict_list","console","log"],"mappings":"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","sourcesContent":["import {firestore} from \"../../firebase\";\n\nconst dict_db = firestore.collection(\"dict\");\n\n//Actions\nconst LOAD = 'dict/LOAD';\nconst CREATE = 'dict/CREATE';\n\nconst initialState = {\n\tlist: [{ id: 1, text: 'ㅎ1ㅎ1', explain: \"히히를 변형한 단어. 숫자 1을 'ㅣ'로 쓴다.\", example: '저 친구가 초콜릿을 줬어. ㅎ1ㅎ1.'}],\n\tis_loaded: false,\n};\n\n// Action Creators\nexport const loadDict = (dict) => {\n\treturn { type: LOAD, dict };\n};\n\nexport const createDict = (dict) => {\n\treturn { type: CREATE, dict };\n};\n\nexport const loadDictFB = () => {\n\treturn function (dispatch){\n\t\tdict_db.get().then((docs) => {\n\t\t\tlet dict_data = [];\n\t\t\t\n\t\t\tdocs.forEach((doc) => {\n\t\t\t\tif(doc.exists){\n\t\t\t\tdict_data = [...dict_data, {id: doc.id, ...doc.data()}];\n\t\t\t\t}\n\t\t\t});\n\t\t\tdispatch(loadDict(dict_data));\n\t\t});\n\t};\n};\n\nexport const addDictFB = (dict) => {\n\treturn function (dispatch){\n\t\tlet dict_item = {text: dict.text, example: dict.example, explain: dict.explain };\n\n\t\tdict_db.add(dict_item).then(docRef => {\n\t\t\tdict_item = {...dict_item, id: docRef.id};\n\t\t\tdispatch(createDict(dict_item));\n\t\t})\n\t}\n}\n\n// export const updateDictFB = (dict) => {\n// \treturn function(dispatch, getState){\n// \t\tconst _dict_data = getState().dict.list[dict];\n\t\t\n// \t\tlet dict_data = {..._dict_data};\n\n// \t\tdict_db.doc(dict_data.id).update(dict_data).then(docRef => {\n// \t\t\tdispatch(updateDictFB(dict));\n// \t\t});\n// \t}\n// }\n\n//Reducer\nexport default function reducer(state = initialState, action = {}) {\n\tswitch (action.type) {\n\t\tcase 'dict/LOAD': {\n\t\t\tif(action.dict.length > 0){\n\t\t\t\t// [{ id: 1, text: 'ㅎ1ㅎ1', explain: \"히히를 변형한 단어. 숫자 1을 'ㅣ'로 쓴다.\", example: '저 친구가 초콜릿을 줬어. ㅎ1ㅎ1.'}]\n\t\t\t\t// {id: '1232', text: {text: 123, example:123, explain: 123}}\n\t\t\t\treturn {...state, list: action.dict};\n\t\t\t}\n\n\t\t\t\treturn state;\n\t\t}\n\n\t\tcase 'dict/CREATE': {\n\t\t\tconst new_dict_list = [...state.list, action.dict,];\n\t\t\tconsole.log(new_dict_list);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlist: new_dict_list,\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}"]},"metadata":{},"sourceType":"module"}