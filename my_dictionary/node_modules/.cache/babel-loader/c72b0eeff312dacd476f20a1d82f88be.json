{"ast":null,"code":"import { firestore } from \"../../firebase\";\nconst dict_db = firestore.collection(\"dict\"); //Actions\n\nconst LOAD = 'dict/LOAD';\nconst CREATE = 'dict/CREATE';\nconst initialState = {\n  list: [{\n    id: 1,\n    text: 'ㅎ1ㅎ1',\n    explain: \"히히를 변형한 단어. 숫자 1을 'ㅣ'로 쓴다.\",\n    example: '저 친구가 초콜릿을 줬어. ㅎ1ㅎ1.'\n  }]\n};\nexport const loadDict = dict => {\n  return {\n    type: LOAD,\n    dict\n  };\n};\nexport const createDict = dict => {\n  return {\n    type: CREATE,\n    dict\n  };\n};\nexport const loadDictFB = () => {\n  return function (dispatch) {\n    console.log(123);\n    dict_db.get().then(docs => {\n      let dict_data = [];\n      docs.forEach(doc => {\n        if (doc.exists) {\n          dict_data = [...dict_data, {\n            id: doc.id,\n            ...doc.data()\n          }];\n        }\n      });\n      console.log(dict_data);\n      dispatch(loadDict(dict_data));\n    });\n  };\n};\nexport const addDictFB = dict => {\n  return function (dispatch) {\n    let dict_item = {\n      text: dict.word,\n      desc: dict.desc,\n      exam: dict.exam\n    };\n    dict_db.add(dict_item).then(docRef => {\n      dict_item = { ...dict_item,\n        id: docRef.id\n      };\n      dispatch(createDict(dict_item));\n    });\n  };\n}; // export const updateDictFB = (dict) => {\n// \treturn function(dispatch, getState){\n// \t\tconst _dict_data = getState().dict.list[dict];\n// \t\tlet dict_data = {..._dict_data};\n// \t\tdict_db.doc(dict_data.id).update(dict_data).then(docRef => {\n// \t\t\tdispatch(updateDictFB(dict));\n// \t\t});\n// \t}\n// }\n//Reducer\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case 'dict/LOAD':\n      {\n        if (action.dict.length > 0) {\n          return {\n            list: action.dict\n          };\n        }\n\n        return state;\n      }\n\n    case 'dict/CREATE':\n      {\n        const new_dict_list = [...state.list, action.dict];\n        console.log(new_dict_list);\n        return { ...state,\n          list: new_dict_list\n        };\n      }\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/hyunjung/Project_01/my_dictionary/my_dictionary/src/redux/modules/dict.js"],"names":["firestore","dict_db","collection","LOAD","CREATE","initialState","list","id","text","explain","example","loadDict","dict","type","createDict","loadDictFB","dispatch","console","log","get","then","docs","dict_data","forEach","doc","exists","data","addDictFB","dict_item","word","desc","exam","add","docRef","reducer","state","action","length","new_dict_list"],"mappings":"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","sourcesContent":["import {firestore} from \"../../firebase\";\n\nconst dict_db = firestore.collection(\"dict\");\n\n//Actions\nconst LOAD = 'dict/LOAD';\nconst CREATE = 'dict/CREATE';\n\nconst initialState = {\n\tlist: [{ id: 1, text: 'ㅎ1ㅎ1', explain: \"히히를 변형한 단어. 숫자 1을 'ㅣ'로 쓴다.\", example: '저 친구가 초콜릿을 줬어. ㅎ1ㅎ1.'}],\n};\n\nexport const loadDict = (dict) => {\n\treturn { type: LOAD, dict };\n};\n\nexport const createDict = (dict) => {\n\treturn { type: CREATE, dict };\n};\n\nexport const loadDictFB = () => {\n\treturn function (dispatch){\n\t\tconsole.log(123);\n\t\tdict_db.get().then((docs) => {\n\t\t\tlet dict_data = [];\n\t\t\t\n\t\t\tdocs.forEach((doc) => {\n\t\t\t\tif(doc.exists){\n\t\t\t\tdict_data = [...dict_data, {id: doc.id, ...doc.data()}];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconsole.log(dict_data);\n\t\t\tdispatch(loadDict(dict_data));\n\t\t});\n\t};\n};\n\nexport const addDictFB = (dict) => {\n\treturn function (dispatch){\n\t\tlet dict_item = {text: dict.word, desc: dict.desc, exam: dict.exam};\n\n\t\tdict_db.add(dict_item).then(docRef => {\n\t\t\tdict_item = {...dict_item, id: docRef.id};\n\t\t\tdispatch(createDict(dict_item));\n\t\t})\n\t}\n}\n\n// export const updateDictFB = (dict) => {\n// \treturn function(dispatch, getState){\n// \t\tconst _dict_data = getState().dict.list[dict];\n\t\t\n// \t\tlet dict_data = {..._dict_data};\n\n// \t\tdict_db.doc(dict_data.id).update(dict_data).then(docRef => {\n// \t\t\tdispatch(updateDictFB(dict));\n// \t\t});\n// \t}\n// }\n\n//Reducer\nexport default function reducer(state = initialState, action = {}) {\n\tswitch (action.type) {\n\t\tcase 'dict/LOAD': {\n\t\t\tif(action.dict.length > 0){\n\t\t\t\treturn {list: action.dict};\n\t\t\t}\n\n\t\t\t\treturn state;\n\t\t}\n\n\t\tcase 'dict/CREATE': {\n\t\t\tconst new_dict_list = [...state.list, action.dict,];\n\t\t\tconsole.log(new_dict_list);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlist: new_dict_list,\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}"]},"metadata":{},"sourceType":"module"}